<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Message">
	<insert id="insertMessage" parameterType="Message">
		INSERT INTO message VALUES((SELECT NVL((SELECT MAX(m_no) FROM message), 0) + 1 FROM dual), #{m_content}, #{sender}, #{receiver}, default, default)
	</insert>
	
	<select id="selectMessageList" parameterType="string" resultType="Message">
		SELECT 
		 	TO_CHAR(M_DATE, 'yyyy-mm-dd HH24:MI') AS M_DATE,  
			M_NO, RESPONSE_CHK, SENDER, M_CONTENT, RECEIVER
			
		FROM MESSAGE where receiver= #{receiver}
	</select>
	
	<select id="selectMessage" parameterType="string" resultType="Message">
		select * from message where m_no = #{m_no}	
	</select>
	
	<select id="countMyMessage" parameterType="string" resultType="int">
		SELECT count(*) FROM MESSAGE where receiver= #{receiver}
	</select>
	
	
	
</mapper>